.. _node-qe:

==============================
Configure Queryable Encryption
==============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

In this guide, you can learn how to configure the {+driver-short+} for {+qe+}.

For coverage of the core concepts, use-cases, examples, and
reference, visit the main :ref:`{+qe+} documentation site <qe-manual-feature-qe>`.

Introduction
------------

{+qe+} allows you to encrypt specific data fields within a document before
sending the data to the server, and to query on encrypted fields. {+qe+}
is useful for situations in which applications must guarantee that
unauthorized parties, including server administrators, cannot read the
encrypted data.


Configuration
-------------

To use {+qe+}, you must:

- Configure the driver with specific settings for encryption.
- Configure and use the driver's encryption package, ``mongodb-client-encryption``.


MongoClient Configuration
+++++++++++++++++++++++++

You must pass an ``AutoEncrytionOptions`` object to the ``MongoClient`` constructor
to enable {+qe+} operations with the {+driver-short+}.

.. include:: /includes/auto-encryption-options.rst

The following shows how to configure a ``MongoClient`` with ``AutoEncryptionOptions``:

.. literalinclude:: /includes/qe/qe-options.js
   :start-after: begin qe mongoclient
   :end-before: end qe mongoclient
   :language: javascript
   :dedent:

`AutoEncryptionOptions API documentation <{+api+}/interfaces/AutoEncryptionOptions.html>`__.

ClientEncryption Configuration
++++++++++++++++++++++++++++++

The ``ClientEncryption`` class in the ``mongodb-client-encryption`` package provides
methods for interacting with your {+dek-long+}s. To construct a ``ClientEncryption``
object, pass a ``MongoClient`` and configuration options to the constructor.

.. include:: /includes/client-encryption-options.rst

The following shows how to create a ``ClientEncryption`` object and configure it.

.. literalinclude:: /includes/qe/qe-options.js
   :start-after: begin client encryption
   :end-before: end client encryption
   :language: javascript
   :dedent:

`ClientEncrytion API documentation <https://www.npmjs.com/package/mongodb-client-encryption/v/{+mongodb-client-encryption-version+}#ClientEncryption>`__.

Learn More
----------

For coverage of the core concepts, use-cases, examples, and
reference, visit the main :ref:`{+qe+} documentation site <qe-manual-feature-qe>`.
