.. _node-network-compression:

===================
Network Compression
===================

You can enable a driver option to compress messages, which reduces the amount
of data passed over the network between MongoDB and your application.

The driver supports the following compression algorithms:

1. `Snappy <https://google.github.io/snappy/>`__: available in MongoDB 3.6 and later.

2. `Zlib <https://zlib.net/>`__: available in MongoDB 3.6 and later.

If you specify multiple compression algorithms, the driver selects the
first one in the list supported by your MongoDB instance.

.. _enable-compression:

Specify Compression Algorithms
------------------------------

You can enable compression for the connection to your MongoDB instance
by specifying the algorithms using one of the following methods:

1. Add the parameter to the connection string. 
2. Specify the ``compressors`` option in your ``MongoClientOptions``.

Select the tab that matches your use case for instructions on how to specify
the  compression algorithm:

.. tabs::

   .. tab:: Add a Parameter to the Connection String
      :tabid: connection-string

      To enable compression using the connection string, add the
      ``compressors`` parameter in the connection string. You can
      specify one or more compression algorithms, separating them with
      commas:

      .. code-block:: javascript
         :emphasize-lines: 2

         const uri =
           "mongodb+srv://<user>:<password>@<cluster-url>/?compressors=snappy,zlib";

         const client = new MongoClient(uri);

   .. tab:: Specify the Option in MongoClientOptions
      :tabid: mongoclientoptions

      To enable compression using `MongoClientOptions <{+api+}/api/global.html#MongoClientOptions>`__,
      pass the ``compressors`` option along with the compression
      algorithm you want to use. You can specify one or more compression
      algorithms, separating them with commas:

      .. code-block:: javascript
         :emphasize-lines: 6

         const uri =
           "mongodb+srv://<user>:<password>@<cluster-url>";

         const client = new MongoClient(uri,
           {
             compressors: ["snappy", "zlib"]
           });

Specify compression algorithms using the following strings:

- "snappy" for `Snappy <https://google.github.io/snappy/>`__ compression
- "zlib" for `Zlib <https://zlib.net/>`__ compression

.. _compression-dependencies:

Compression Algorithm Dependencies
----------------------------------

To use Snappy compression, add it to your application dependencies by
running the following command:

.. code-block:: javascript

   npm install --save snappy

You can use Zlib compression without adding any additional dependencies.
