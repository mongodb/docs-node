===========================
Update Arrays in a Document
===========================

.. default-domain:: mongodb

Sometimes you need to modify arrays within a document. ``arrayFilters``,
a collection of variables indicating positions in arrays, allows this
kind of operation. Use the
`filtered position operator
<https://docs.mongodb.com/manual/reference/operator/update/positional-filtered/index.html>`_
to access the values of the variables stored within ``arrayFilters``,
which represent positions in an array that match query filter
criteria.

Example
~~~~~~~

Consider a collection of finalists in hot dog eating contests by year:

.. code-block:: javascript

   {
      year: 1989,
      finalists: [
         { name : "Steve Jobs" },
         { name : "Ford Anglia" },
         { name : "Beth Atkins" },
      ]
   },
   {
      year: 1990,
      finalists: [
         { name : "Cat Stevens" },
         { name : "Reg Cattermole" },
         { name : "Anis Kollal" },
      ]
   },
   {
      year: 1991,
      finalists: [
         { name : "Steve Jobs" },
         { name : "Cat Stevens" },
         { name : "Beth Atkins" },
      ]
   }

If "Steve Jobs" changed his name, we might want to update his name
across all years where "Steve Jobs" made the hot dog eating finals.
To accomplish this, we could use ``arrayFilters`` to find and update
all instances of the name "Steve Jobs" to "Steve Lobster":

.. literalinclude:: /code-snippets/crud/arrayFilters.js
   :language: javascript
   :start-after: start arrayFilters example
   :end-before: end arrayFilters example
   :dedent: 4

This operation produces the following collection:

.. code-block:: javascript

   {
      year: 1989,
      finalists: [
         { name : "Steve Lobster" },
         { name : "Ford Anglia" },
         { name : "Beth Atkins" },
      ]
   },
   {
      year: 1990,
      finalists: [
         { name : "Cat Stevens" },
         { name : "Reg Cattermole" },
         { name : "Anis Kollal" },
      ]
   },
   {
      year: 1991,
      finalists: [
         { name : "Steve Lobster" },
         { name : "Cat Stevens" },
         { name : "Beth Atkins" },
      ]
   }
